# =============================================================================
# HYPERLIQUID API CONFIGURATION (Required)
# =============================================================================
#API_SECRET=0xf9f021b1e4985f038d9fc00fd77545acaa2e3cd69a57516e6f34c8d8516d5a10
API_SECRET=0xb674294f2b5f264794be269bfda1e406337525ccc7264e36c86a1d5a1c7a7a3c
#ACCOUNT_ADDRESS=0x3756B50198284DA1CAFd09E9B504852Fe9847760
ACCOUNT_ADDRESS=0xeF0CA0E40900c3CEe04031f1eb5ee078f75e68F0

# Network Configuration (switch between testnet/mainnet)
TESTNET=true
# RPC URLs (optional - uses SDK defaults if not set)
TESTNET_RPC_URL=https://api.hyperliquid-testnet.xyz
MAINNET_RPC_URL=https://api.hyperliquid.xyz

# =============================================================================
# TRADING CONFIGURATION
# =============================================================================
SYMBOL=SOL
BOT_MODE=rule_based
MAX_LEVERAGE=5

# =============================================================================
# RISK MANAGEMENT
# =============================================================================
MAX_DRAWDOWN_PCT=10.0
MAX_DAILY_LOSS_PCT=5.0
# NOTE: TP/SL is now ATR-based via ATR_SL_MULTIPLIER and ATR_TP_MULTIPLIER
# The old STOP_LOSS_PCT/TAKE_PROFIT_PCT are no longer used

# =============================================================================
# POSITION SIZING (Hierarchy: Kelly → Strategy → Fallback)
# =============================================================================
MAX_POSITIONS=3

# FALLBACK position size when Kelly has < KELLY_MIN_TRADES history
# For small accounts (<$100), recommend 30-40% to reduce risk
POSITION_SIZE_PCT=25

# SAFETY CAP - Never exceed this regardless of Kelly/strategy
MAX_POSITION_SIZE_PCT=40

# Risk per trade as percentage of account (for stop loss calculation)
RISK_PER_TRADE_PCT=2.0

# =============================================================================
# KELLY CRITERION (Adaptive Position Sizing)
# =============================================================================
# Enable/disable Kelly sizing (true = use Kelly, false = use POSITION_SIZE_PCT)
KELLY_ENABLED=true

# Fractional Kelly (0.5 = Half Kelly, safer; 1.0 = Full Kelly, aggressive)
KELLY_FRACTION=0.5

# Minimum trades before Kelly starts adjusting (uses fallback before this)
KELLY_MIN_TRADES=20

# Kelly's max recommended position (safety cap within Kelly)
KELLY_MAX_POSITION_PCT=20

# =============================================================================
# DATABASE (PostgreSQL with NeonDB)
# =============================================================================
DATABASE_URL=postgresql://neondb_owner:npg_fIoF54ezKsTH@ep-fancy-grass-abs3vfwd-pooler.eu-west-2.aws.neon.tech/neondb?sslmode=require

# =============================================================================
# TELEGRAM NOTIFICATIONS (Optional)
# =============================================================================
# Leave empty to disable Telegram notifications
TELEGRAM_BOT_TOKEN=8374468872:AAGZEBeQ3Yjwb4v2xNQRuePIbnBrSVKaOGI
TELEGRAM_CHAT_ID=1674347811


# Telegram notification settings (optional - uses defaults if not set)
# Set to 'false' to disable specific notification types
TG_NOTIFY_SIGNALS=true
TG_NOTIFY_FILLS=true
TG_NOTIFY_PNL_WARNINGS=true
# Scheduled status update interval in seconds (0 to disable)
TG_STATUS_INTERVAL=3600


# =============================================================================
# SYSTEM CONFIGURATION
# =============================================================================
# Logging level
LOG_LEVEL=INFO


# =============================================================================
# WORLD-CLASS STRATEGY CONFIGURATION
# =============================================================================
# Strategy mode: world_class (recommended), enterprise, all

# -------------- Market Regime Detection --------------
# ADX threshold for trending market (default: 25)
ADX_TRENDING_THRESHOLD=25

# ADX threshold for strong trend (default: 35)
ADX_STRONG_THRESHOLD=35

# ATR ratio for high volatility (default: 1.5)
VOLATILITY_HIGH_RATIO=1.5

# -------------- Smart Money Concepts --------------
# Minimum FVG gap size as percentage (default: 0.3)
FVG_MIN_GAP_PCT=0.3

# Order Block lookback period in candles (default: 50)
ORDER_BLOCK_LOOKBACK=50

# Liquidity sweep lookback (default: 20)
LIQUIDITY_LOOKBACK=20

# -------------- Multi-Timeframe Analysis --------------
# Higher timeframe intervals (comma-separated)
HTF_INTERVALS=15m,1h,4h

# Lower timeframe interval
LTF_INTERVAL=1m

# MTF EMA periods
MTF_EMA_FAST=9
MTF_EMA_SLOW=21

# -------------- Order Flow Analysis --------------
# Whale trade threshold in USD (default: 50000)
WHALE_THRESHOLD_USD=50000

# Large trade threshold in USD (default: 10000)
LARGE_TRADE_THRESHOLD_USD=10000

# -------------- Adaptive Risk Management --------------
# ATR multiplier for stop loss (default: 2.0)
ATR_SL_MULTIPLIER=2.0

# ATR multiplier for take profit (default: 3.5)
ATR_TP_MULTIPLIER=3.5

# Signal cooldown in seconds (default: 180)
SIGNAL_COOLDOWN=180

# =============================================================================
# SIGNAL QUALITY SETTINGS (HIGH WIN RATE MODE)
# =============================================================================
# Minimum signal score out of 25 
# Score breakdown: Base(12) + Enhanced(13) = 25 theoretical max
# 
# QUALITY LEVELS:
#   6-8   = Aggressive (more trades, ~50-55% win rate)
#   10-12 = Balanced (moderate trades, ~60-65% win rate)
#   12-14 = Conservative (fewer trades, ~65-70% win rate)
#   15+   = Ultra-Conservative (rare trades, ~70-75% win rate)
#
# Current: 12 = High quality signals, targeting 70% win rate
MIN_SIGNAL_SCORE=12

# Penalty values (higher = stricter, fewer trades but higher quality)
# Counter-trend penalty (trading against regime)
REGIME_PENALTY=5.0

# Against supertrend penalty
SUPERTREND_PENALTY=3.0

# Weak volume penalty
VOLUME_PENALTY=2.0

# Against higher timeframe penalty
HTF_PENALTY=3.0

# -------------- BTC Correlation (Altcoins) --------------
# High correlation threshold (default: 0.7)
HIGH_CORRELATION=0.7

# Moderate correlation threshold (default: 0.4)
MODERATE_CORRELATION=0.4

# Low correlation threshold (default: 0.1)
LOW_CORRELATION=0.1

# Correlation lookback period (default: 20)
CORRELATION_PERIOD=20

# Relative strength lookback (default: 14)
RS_PERIOD=14

# RS outperformance threshold (default: 1.05)
RS_OUTPERFORM=1.05

# RS underperformance threshold (default: 0.95)
RS_UNDERPERFORM=0.95

# =============================================================================
# AI/ML AUTO-TRAINING CONFIGURATION
# =============================================================================
# Minimum trades required before auto-retraining
MIN_TRADES_FOR_RETRAIN=100

# Enable auto-training scheduler
AUTO_TRAIN_ENABLED=true

# Model save directory
MODEL_SAVE_PATH=ml/models/saved

# Training data directory
TRADE_LOG_PATH=data/trades

# ========== NEW IN V4.0 ==========

# Paper Trading
PAPER_TRADING=false
PAPER_TRADING_BALANCE=1000

# Multi-Asset Mode  
MULTI_ASSET_MODE=true
MULTI_ASSETS=SOL,ETH,BTC
ASSET_COOLDOWN=300

# Timeframe
TIMEFRAME=1m

# Swing Strategy Cooldown
SWING_COOLDOWN=300

# Pro Trading Filters
HTF_MIN_ALIGNMENT=0.6
BTC_DUMP_THRESHOLD=-2.0
BTC_PUMP_THRESHOLD=2.0

# Small Account Mode (auto-detected based on balance)
# Thresholds: micro <$30, small <$100, starter <$500, normal >$500
# Position sizing is handled by Kelly, leverage is auto-adjusted by tier
SMALL_ACCOUNT_THRESHOLD=100

# =============================================================================
# WHIPSAW PROTECTION (HIGH WIN RATE MODE)
# =============================================================================
# Number of consecutive scans required to confirm a signal
# Higher = more confirmation = fewer false signals = higher win rate
# 3 = standard, 4 = conservative, 5 = ultra-conservative
SIGNAL_CONFIRMATION_SCANS=4

# Seconds to lock direction after a confirmed signal (prevents rapid flips)
# 900 = 15 minutes, 1800 = 30 minutes
DIRECTION_LOCK_SECONDS=1200

# =============================================================================
# TREND INDICATORS (NEW in v5.0)
# =============================================================================
# Supertrend - Clear trend direction with volatility adjustment
SUPERTREND_PERIOD=10
SUPERTREND_MULTIPLIER=2.0

# Donchian Channel - Breakout detection and trend bias
DONCHIAN_PERIOD=50

# =============================================================================
# PROFESSIONAL INDICATORS (NEW in v5.1)
# =============================================================================
# StochRSI - More sensitive overbought/oversold detection
STOCH_RSI_PERIOD=14
STOCH_RSI_K=3
STOCH_RSI_D=3

# Chaikin Money Flow - Institutional buying/selling pressure
CMF_PERIOD=20